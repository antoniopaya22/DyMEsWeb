---
import Layout from '../layouts/Layout.astro';

// ‚îÄ‚îÄ‚îÄ SRD Data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const RACES = [
  { id: 'humano', nombre: 'Humano', icon: 'üë§', descripcion: 'Los humanos son los m√°s adaptables y ambiciosos de las razas comunes. Sus caracter√≠sticas var√≠an enormemente dependiendo de d√≥nde vivan.',
    details: [{ label: 'Bonificaci√≥n', value: '+1 a todas las caracter√≠sticas' }, { label: 'Velocidad', value: '30 pies' }, { label: 'Tama√±o', value: 'Mediano' }, { label: 'Idiomas', value: 'Com√∫n + 1 adicional' }] },
  { id: 'elfo', nombre: 'Elfo', icon: 'üßù', descripcion: 'Los elfos son un pueblo m√°gico de gracia sobrenatural que habitan el mundo sin pertenecer del todo a √©l.',
    details: [{ label: 'Bonificaci√≥n', value: 'DES +2' }, { label: 'Velocidad', value: '30 pies' }, { label: 'Visi√≥n', value: 'Visi√≥n en la oscuridad (60 pies)' }, { label: 'Rasgos', value: 'Sentidos agudos, Ancestros fe√©ricos, Trance' }] },
  { id: 'enano', nombre: 'Enano', icon: '‚õèÔ∏è', descripcion: 'Los enanos son gente robusta y corpulenta, tan estoicos y firmes como las monta√±as que adoran.',
    details: [{ label: 'Bonificaci√≥n', value: 'CON +2' }, { label: 'Velocidad', value: '25 pies' }, { label: 'Visi√≥n', value: 'Visi√≥n en la oscuridad (60 pies)' }, { label: 'Rasgos', value: 'Resistencia enana, Entrenamiento de combate, Dominio con herramientas, Afinidad con la piedra' }] },
  { id: 'mediano', nombre: 'Mediano', icon: 'üçÄ', descripcion: 'Los medianos son gente pr√°ctica y menuda que no desean aventuras ni la gloria.',
    details: [{ label: 'Bonificaci√≥n', value: 'DES +2' }, { label: 'Velocidad', value: '25 pies' }, { label: 'Tama√±o', value: 'Peque√±o' }, { label: 'Rasgos', value: 'Afortunado, Valiente, Agilidad mediana' }] },
  { id: 'draconido', nombre: 'Drac√≥nido', icon: 'üêâ', descripcion: 'Los drac√≥nidos poseen su propia estirpe orgullosa y creen fervientemente que fueron creados por los propios dioses drag√≥n.',
    details: [{ label: 'Bonificaci√≥n', value: 'FUE +2, CAR +1' }, { label: 'Velocidad', value: '30 pies' }, { label: 'Rasgos', value: 'Linaje drac√≥nico, Arma de aliento, Resistencia al da√±o' }] },
  { id: 'gnomo', nombre: 'Gnomo', icon: 'üîß', descripcion: 'Los gnomos son seres llenos de energ√≠a y entusiasmo, siempre curiosos y deseosos de aprender.',
    details: [{ label: 'Bonificaci√≥n', value: 'INT +2' }, { label: 'Velocidad', value: '25 pies' }, { label: 'Visi√≥n', value: 'Visi√≥n en la oscuridad (60 pies)' }, { label: 'Rasgos', value: 'Astucia gn√≥mica' }] },
  { id: 'semielfo', nombre: 'Semielfo', icon: 'üåø', descripcion: 'Los semielfos combinan las mejores cualidades de sus progenitores √©lficos y humanos.',
    details: [{ label: 'Bonificaci√≥n', value: 'CAR +2, dos +1 a elecci√≥n' }, { label: 'Velocidad', value: '30 pies' }, { label: 'Visi√≥n', value: 'Visi√≥n en la oscuridad (60 pies)' }, { label: 'Rasgos', value: 'Ancestros fe√©ricos, Versatilidad en habilidades' }] },
  { id: 'semiorco', nombre: 'Semiorco', icon: 'üí™', descripcion: 'Los semiorcos combinan la fuerza de sus ancestros orcos con la tenacidad humana.',
    details: [{ label: 'Bonificaci√≥n', value: 'FUE +2, CON +1' }, { label: 'Velocidad', value: '30 pies' }, { label: 'Visi√≥n', value: 'Visi√≥n en la oscuridad (60 pies)' }, { label: 'Rasgos', value: 'Amenazante, Resistencia incesante, Ataques salvajes' }] },
  { id: 'tiefling', nombre: 'Tiefling', icon: 'üòà', descripcion: 'Los tieflings descienden de linajes humanos que han sido tocados por la esencia de los Nueve Infiernos.',
    details: [{ label: 'Bonificaci√≥n', value: 'CAR +2, INT +1' }, { label: 'Velocidad', value: '30 pies' }, { label: 'Visi√≥n', value: 'Visi√≥n en la oscuridad (60 pies)' }, { label: 'Rasgos', value: 'Resistencia infernal, Legado infernal' }] },
];

const CLASSES = [
  { id: 'barbaro', nombre: 'B√°rbaro', icon: 'ü™ì', descripcion: 'Un fiero guerrero de origen primitivo que puede entrar en frenes√≠ de batalla.',
    details: [{ label: 'Dado de golpe', value: 'd12' }, { label: 'Salvaciones', value: 'FUE, CON' }, { label: 'Armaduras', value: 'Ligeras, medias, escudos' }, { label: 'Armas', value: 'Armas sencillas, armas marciales' }] },
  { id: 'bardo', nombre: 'Bardo', icon: 'üéµ', descripcion: 'Un maestro inspirador de la m√∫sica, la magia y el combate cuyas palabras infunden poder.',
    details: [{ label: 'Dado de golpe', value: 'd8' }, { label: 'Salvaciones', value: 'DES, CAR' }, { label: 'Magia', value: 'Lanzador completo (CAR)' }, { label: 'Rasgos', value: 'Inspiraci√≥n de bardo, Brib√≥n experto' }] },
  { id: 'brujo', nombre: 'Brujo', icon: 'üåë', descripcion: 'Un portador de magia derivada de un pacto con una entidad extraplanar.',
    details: [{ label: 'Dado de golpe', value: 'd8' }, { label: 'Salvaciones', value: 'SAB, CAR' }, { label: 'Magia', value: 'Magia de pacto (CAR)' }, { label: 'Rasgos', value: 'Patr√≥n de ultratumba, Invocaciones sobrenaturales' }] },
  { id: 'clerigo', nombre: 'Cl√©rigo', icon: '‚úùÔ∏è', descripcion: 'Un campe√≥n sacerdotal que empu√±a la magia divina al servicio de un poder superior.',
    details: [{ label: 'Dado de golpe', value: 'd8' }, { label: 'Salvaciones', value: 'SAB, CAR' }, { label: 'Magia', value: 'Lanzador completo (SAB)' }, { label: 'Rasgos', value: 'Dominio divino, Canalizar divinidad' }] },
  { id: 'druida', nombre: 'Druida', icon: 'üåø', descripcion: 'Un sacerdote de la Vieja Fe, con poder sobre la naturaleza y capaz de tomar forma animal.',
    details: [{ label: 'Dado de golpe', value: 'd8' }, { label: 'Salvaciones', value: 'INT, SAB' }, { label: 'Magia', value: 'Lanzador completo (SAB)' }, { label: 'Rasgos', value: 'Dru√≠dico, Forma salvaje' }] },
  { id: 'explorador', nombre: 'Explorador', icon: 'üèπ', descripcion: 'Un guerrero que utiliza la destreza marcial y la magia de la naturaleza para combatir amenazas.',
    details: [{ label: 'Dado de golpe', value: 'd10' }, { label: 'Salvaciones', value: 'FUE, DES' }, { label: 'Magia', value: 'Medio lanzador (SAB)' }, { label: 'Rasgos', value: 'Enemigo predilecto, Explorador natural' }] },
  { id: 'guerrero', nombre: 'Guerrero', icon: '‚öîÔ∏è', descripcion: 'Un maestro del combate marcial con una variedad de armas y armaduras.',
    details: [{ label: 'Dado de golpe', value: 'd10' }, { label: 'Salvaciones', value: 'FUE, CON' }, { label: 'Armaduras', value: 'Todas las armaduras, escudos' }, { label: 'Rasgos', value: 'Estilo de combate, Tomar aliento, Acci√≥n de oleada' }] },
  { id: 'hechicero', nombre: 'Hechicero', icon: '‚ú®', descripcion: 'Un lanzador de conjuros que obtiene su magia inherente de un linaje o don sobrenatural.',
    details: [{ label: 'Dado de golpe', value: 'd6' }, { label: 'Salvaciones', value: 'CON, CAR' }, { label: 'Magia', value: 'Lanzador completo (CAR)' }, { label: 'Rasgos', value: 'Origen de hechicer√≠a, Fuente de magia, Metamagia' }] },
  { id: 'mago', nombre: 'Mago', icon: 'üîÆ', descripcion: 'Un usuario erudito de la magia arcana capaz de manipular las estructuras de la realidad.',
    details: [{ label: 'Dado de golpe', value: 'd6' }, { label: 'Salvaciones', value: 'INT, SAB' }, { label: 'Magia', value: 'Lanzador completo (INT)' }, { label: 'Rasgos', value: 'Recuperaci√≥n arcana, Tradici√≥n arcana, Libro de conjuros' }] },
  { id: 'monje', nombre: 'Monje', icon: 'üëä', descripcion: 'Un maestro de las artes marciales que aprovecha el poder del cuerpo en busca de la perfecci√≥n.',
    details: [{ label: 'Dado de golpe', value: 'd8' }, { label: 'Salvaciones', value: 'FUE, DES' }, { label: 'Armas', value: 'Armas sencillas, espadas cortas' }, { label: 'Rasgos', value: 'Defensa sin armadura, Artes marciales, Ki' }] },
  { id: 'paladin', nombre: 'Palad√≠n', icon: 'üõ°Ô∏è', descripcion: 'Un santo guerrero vinculado a un juramento sagrado.',
    details: [{ label: 'Dado de golpe', value: 'd10' }, { label: 'Salvaciones', value: 'SAB, CAR' }, { label: 'Magia', value: 'Medio lanzador (CAR)' }, { label: 'Rasgos', value: 'Sentido divino, Imposici√≥n de manos, Castigo divino' }] },
  { id: 'picaro', nombre: 'P√≠caro', icon: 'üó°Ô∏è', descripcion: 'Un brib√≥n que utiliza el sigilo y los enga√±os para superar los obst√°culos y enemigos.',
    details: [{ label: 'Dado de golpe', value: 'd8' }, { label: 'Salvaciones', value: 'DES, INT' }, { label: 'Rasgos', value: 'Experiencia, Ataque furtivo, Jerga de ladrones, Acci√≥n astuta' }] },
];

const BACKGROUNDS = [
  { id: 'acolito', nombre: 'Ac√≥lito', icon: '‚õ™', descripcion: 'Has dedicado tu vida al servicio de un templo consagrado a un dios.',
    details: [{ label: 'Habilidades', value: 'Perspicacia, Religi√≥n' }, { label: 'Idiomas', value: '2 a elecci√≥n' }, { label: 'Rasgo', value: 'Refugio del Fiel' }] },
  { id: 'charlatan', nombre: 'Charlat√°n', icon: 'üé≠', descripcion: 'Siempre has tenido facilidad para relacionarte con la gente‚Ä¶ y sacar tajada.',
    details: [{ label: 'Habilidades', value: 'Enga√±o, Juego de manos' }, { label: 'Herramientas', value: 'Kit de disfraz, kit de falsificaci√≥n' }, { label: 'Rasgo', value: 'Identidad Falsa' }] },
  { id: 'criminal', nombre: 'Criminal', icon: 'üîì', descripcion: 'Eres un delincuente experimentado con un historial de infringir la ley.',
    details: [{ label: 'Habilidades', value: 'Enga√±o, Sigilo' }, { label: 'Herramientas', value: 'Un tipo de juego, herramientas de ladr√≥n' }, { label: 'Rasgo', value: 'Contacto Criminal' }] },
  { id: 'artista', nombre: 'Artista', icon: 'üé™', descripcion: 'Prosperas frente al p√∫blico. Sabes c√≥mo cautivar, entretener e incluso inspirar.',
    details: [{ label: 'Habilidades', value: 'Acrobacias, Interpretaci√≥n' }, { label: 'Herramientas', value: 'Kit de disfraz, un instrumento musical' }, { label: 'Rasgo', value: 'Favor del P√∫blico' }] },
  { id: 'heroe_popular', nombre: 'H√©roe Popular', icon: 'ü¶∏', descripcion: 'Provienes de un entorno humilde pero est√°s destinado a mucho m√°s.',
    details: [{ label: 'Habilidades', value: 'Trato con animales, Supervivencia' }, { label: 'Herramientas', value: 'Un tipo de herramientas de artesano, veh√≠culos de tierra' }, { label: 'Rasgo', value: 'Hospitalidad R√∫stica' }] },
  { id: 'ermitano', nombre: 'Ermita√±o', icon: 'üèîÔ∏è', descripcion: 'Has vivido en reclusi√≥n durante gran parte de tu vida.',
    details: [{ label: 'Habilidades', value: 'Medicina, Religi√≥n' }, { label: 'Herramientas', value: 'Kit de herborister√≠a' }, { label: 'Rasgo', value: 'Descubrimiento' }] },
  { id: 'noble', nombre: 'Noble', icon: 'üëë', descripcion: 'Comprendes la riqueza, el poder y los privilegios.',
    details: [{ label: 'Habilidades', value: 'Historia, Persuasi√≥n' }, { label: 'Herramientas', value: 'Un tipo de juego' }, { label: 'Rasgo', value: 'Posici√≥n Privilegiada' }] },
  { id: 'forajido', nombre: 'Forajido', icon: 'üå≤', descripcion: 'Creciste en la naturaleza, lejos de la civilizaci√≥n y de las comodidades de la ciudad.',
    details: [{ label: 'Habilidades', value: 'Atletismo, Supervivencia' }, { label: 'Herramientas', value: 'Un instrumento musical' }, { label: 'Rasgo', value: 'Vagabundo' }] },
  { id: 'sabio', nombre: 'Sabio', icon: 'üìö', descripcion: 'Has dedicado a√±os de tu vida al estudio del multiverso.',
    details: [{ label: 'Habilidades', value: 'Arcanos, Historia' }, { label: 'Idiomas', value: '2 a elecci√≥n' }, { label: 'Rasgo', value: 'Investigador' }] },
  { id: 'marinero', nombre: 'Marinero', icon: '‚öì', descripcion: 'Has navegado durante a√±os y has resistido tormentas terribles.',
    details: [{ label: 'Habilidades', value: 'Atletismo, Percepci√≥n' }, { label: 'Herramientas', value: 'Herramientas de navegante, veh√≠culos acu√°ticos' }, { label: 'Rasgo', value: 'Pasaje por Barco' }] },
  { id: 'soldado', nombre: 'Soldado', icon: 'üéñÔ∏è', descripcion: 'Pasaste a√±os sirviendo en la milicia o en un ej√©rcito mercenario.',
    details: [{ label: 'Habilidades', value: 'Atletismo, Intimidaci√≥n' }, { label: 'Herramientas', value: 'Un tipo de juego, veh√≠culos de tierra' }, { label: 'Rasgo', value: 'Rango Militar' }] },
  { id: 'pilluelo', nombre: 'Pilluelo', icon: 'üêÄ', descripcion: 'Creciste en las calles, solo, hu√©rfano y pobre.',
    details: [{ label: 'Habilidades', value: 'Juego de manos, Sigilo' }, { label: 'Herramientas', value: 'Kit de disfraz, herramientas de ladr√≥n' }, { label: 'Rasgo', value: 'Secretos de la Ciudad' }] },
  { id: 'guildartisan', nombre: 'Artesano Gremial', icon: 'üî®', descripcion: 'Eres miembro de un gremio de artesanos y dominas un conjunto de habilidades especiales.',
    details: [{ label: 'Habilidades', value: 'Perspicacia, Persuasi√≥n' }, { label: 'Herramientas', value: 'Un tipo de herramientas de artesano' }, { label: 'Rasgo', value: 'Membres√≠a del Gremio' }] },
];
---

<Layout title="Compendio SRD 5.1 ‚Äî DyMEs" description="Consulta el compendio del System Reference Document 5.1 de D&D 5e en espa√±ol. Razas, clases y trasfondos.">

  <!-- ‚îÄ‚îÄ‚îÄ Top Header Bar ‚îÄ‚îÄ‚îÄ -->
  <header class="docs-header">
    <div class="docs-header-inner">
      <!-- Left: Logo -->
      <a href="/" class="docs-logo">
        <img src="/favicon.svg" alt="" class="w-6 h-6" />
        <span class="font-display font-bold text-[14px] text-[#272519]">DyMEs</span>
      </a>

      <!-- Center: Search trigger -->
      <button id="search-trigger" class="docs-search-trigger" type="button">
        <svg class="w-4 h-4 text-[#978F62]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <span class="text-[13px] text-[#978F62]">Buscar en el compendio...</span>
        <kbd class="docs-kbd">Ctrl K</kbd>
      </button>

      <!-- Right: CTA -->
      <div class="flex items-center gap-3">
        <a href="/" class="text-[13px] text-[#555137] hover:text-[#272519] transition-colors hidden sm:inline">Inicio</a>
        <a href="/login" class="text-[13px] font-semibold bg-[#8f3d38] hover:bg-[#a04540] text-white px-4 py-1.5 rounded-lg transition-all hover:shadow-lg hover:shadow-[#8f3d38]/20">Empezar</a>
      </div>
    </div>
  </header>

  <!-- ‚îÄ‚îÄ‚îÄ Mobile sidebar toggle ‚îÄ‚îÄ‚îÄ -->
  <button id="sidebar-toggle" class="docs-sidebar-toggle lg:hidden" type="button" aria-label="Abrir men√∫">
    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
  </button>

  <!-- ‚îÄ‚îÄ‚îÄ Backdrop ‚îÄ‚îÄ‚îÄ -->
  <div id="sidebar-backdrop" class="docs-backdrop hidden lg:hidden"></div>

  <!-- ‚îÄ‚îÄ‚îÄ Layout shell ‚îÄ‚îÄ‚îÄ -->
  <div class="docs-shell">

    <!-- ‚ïê‚ïê‚ïê LEFT SIDEBAR ‚ïê‚ïê‚ïê -->
    <aside id="sidebar" class="docs-sidebar">
      <div class="docs-sidebar-inner">

        <!-- Sidebar header -->
        <div class="docs-sidebar-header">
          <div class="flex items-center gap-2">
            <span class="text-lg">üìö</span>
            <div>
              <div class="text-[13px] font-display font-bold text-[#272519]">Compendio SRD</div>
              <div class="text-[10px] text-[#978F62] tracking-wide">D&D 5e ¬∑ Espa√±ol</div>
            </div>
          </div>
        </div>

        <!-- Nav sections -->
        <nav class="docs-nav">

          <!-- Intro -->
          <a href="#introduccion" class="docs-nav-link docs-nav-link-active" data-nav="introduccion">
            <svg class="w-4 h-4 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
            Introducci√≥n
          </a>

          <!-- Razas -->
          <div class="docs-nav-group">
            <button class="docs-nav-group-btn" data-section="razas" type="button">
              <span class="flex items-center gap-2">
                <span class="text-sm">üßù</span>
                <span>Razas</span>
              </span>
              <span class="flex items-center gap-1.5">
                <span class="docs-nav-badge">{RACES.length}</span>
                <svg class="docs-nav-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
              </span>
            </button>
            <div class="docs-nav-group-items" data-group="razas">
              {RACES.map(r => (
                <a href={`#${r.id}`} class="docs-nav-item" data-nav={r.id}>
                  <span class="docs-nav-dot"></span>
                  {r.nombre}
                </a>
              ))}
            </div>
          </div>

          <!-- Clases -->
          <div class="docs-nav-group">
            <button class="docs-nav-group-btn" data-section="clases" type="button">
              <span class="flex items-center gap-2">
                <span class="text-sm">‚öîÔ∏è</span>
                <span>Clases</span>
              </span>
              <span class="flex items-center gap-1.5">
                <span class="docs-nav-badge">{CLASSES.length}</span>
                <svg class="docs-nav-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
              </span>
            </button>
            <div class="docs-nav-group-items" data-group="clases">
              {CLASSES.map(c => (
                <a href={`#${c.id}`} class="docs-nav-item" data-nav={c.id}>
                  <span class="docs-nav-dot"></span>
                  {c.nombre}
                </a>
              ))}
            </div>
          </div>

          <!-- Trasfondos -->
          <div class="docs-nav-group">
            <button class="docs-nav-group-btn" data-section="trasfondos" type="button">
              <span class="flex items-center gap-2">
                <span class="text-sm">üìñ</span>
                <span>Trasfondos</span>
              </span>
              <span class="flex items-center gap-1.5">
                <span class="docs-nav-badge">{BACKGROUNDS.length}</span>
                <svg class="docs-nav-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
              </span>
            </button>
            <div class="docs-nav-group-items" data-group="trasfondos">
              {BACKGROUNDS.map(b => (
                <a href={`#${b.id}`} class="docs-nav-item" data-nav={b.id}>
                  <span class="docs-nav-dot"></span>
                  {b.nombre}
                </a>
              ))}
            </div>
          </div>

        </nav>

        <!-- Sidebar footer -->
        <div class="docs-sidebar-footer">
          <p class="text-[10px] text-[#978F62] leading-relaxed">SRD 5.1 ¬∑ OGL 1.0a</p>
        </div>
      </div>
    </aside>

    <!-- ‚ïê‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê -->
    <main class="docs-main">
      <div class="docs-content">

        <!-- Breadcrumbs -->
        <div class="docs-breadcrumbs">
          <a href="/">DyMEs</a>
          <svg class="w-3 h-3 text-[#978F62]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
          <span class="text-[#272519]">Compendio</span>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ Introduction ‚îÄ‚îÄ‚îÄ -->
        <section id="introduccion" class="docs-section scroll-mt-20" data-section-id="introduccion">
          <h1 class="docs-h1">Compendio SRD 5.1</h1>
          <p class="docs-lead">Referencia completa del System Reference Document 5.1 de Dungeons & Dragons 5¬™ edici√≥n, traducido al espa√±ol.</p>

          <div class="docs-callout">
            <div class="docs-callout-icon">üìú</div>
            <div>
              <p class="text-[13px] font-semibold text-[#272519] mb-1">Sobre este compendio</p>
              <p class="text-[13px] text-[#555137] leading-relaxed">Este compendio contiene la informaci√≥n b√°sica del SRD 5.1 ‚Äî las reglas y opciones disponibles bajo la Open Gaming License. Incluye <strong>{RACES.length} razas</strong>, <strong>{CLASSES.length} clases</strong> y <strong>{BACKGROUNDS.length} trasfondos</strong> para crear tu personaje.</p>
            </div>
          </div>

          <!-- Quick summary cards -->
          <div class="grid sm:grid-cols-3 gap-3 mt-8">
            <a href="#humano" class="docs-summary-card group">
              <span class="text-2xl mb-2">üßù</span>
              <span class="text-[14px] font-display font-bold text-[#272519] group-hover:text-[#8f3d38] transition-colors">Razas</span>
              <span class="text-[12px] text-[#978F62]">{RACES.length} opciones</span>
            </a>
            <a href="#barbaro" class="docs-summary-card group">
              <span class="text-2xl mb-2">‚öîÔ∏è</span>
              <span class="text-[14px] font-display font-bold text-[#272519] group-hover:text-[#8f3d38] transition-colors">Clases</span>
              <span class="text-[12px] text-[#978F62]">{CLASSES.length} opciones</span>
            </a>
            <a href="#acolito" class="docs-summary-card group">
              <span class="text-2xl mb-2">üìñ</span>
              <span class="text-[14px] font-display font-bold text-[#272519] group-hover:text-[#8f3d38] transition-colors">Trasfondos</span>
              <span class="text-[12px] text-[#978F62]">{BACKGROUNDS.length} opciones</span>
            </a>
          </div>
        </section>

        <div class="docs-divider"></div>

        <!-- ‚îÄ‚îÄ‚îÄ RAZAS ‚îÄ‚îÄ‚îÄ -->
        <section id="razas-section" class="docs-section scroll-mt-20" data-section-id="razas">
          <div class="docs-section-header">
            <span class="docs-section-badge">üßù Razas</span>
            <h2 class="docs-h2">Razas jugables</h2>
            <p class="docs-p text-[#555137]">Las razas disponibles en el SRD 5.1 para la creaci√≥n de personajes. Cada raza otorga bonificaciones, rasgos y habilidades √∫nicas.</p>
          </div>

          {RACES.map((entry, i) => (
            <article id={entry.id} class="docs-entry scroll-mt-20" data-section-id={entry.id} data-search-name={entry.nombre.toLowerCase()} data-search-category="razas">
              <div class="docs-entry-header">
                <span class="docs-entry-icon">{entry.icon}</span>
                <div>
                  <h3 class="docs-h3">{entry.nombre}</h3>
                  <span class="docs-tag">Raza</span>
                </div>
                <a href={`#${entry.id}`} class="docs-anchor" title="Enlace directo">#</a>
              </div>
              <p class="docs-p">{entry.descripcion}</p>
              <div class="docs-stats-grid">
                {entry.details.map(d => (
                  <div class="docs-stat">
                    <dt class="docs-stat-label">{d.label}</dt>
                    <dd class="docs-stat-value">{d.value}</dd>
                  </div>
                ))}
              </div>
              {i < RACES.length - 1 && <div class="docs-entry-divider"></div>}
            </article>
          ))}
        </section>

        <div class="docs-divider"></div>

        <!-- ‚îÄ‚îÄ‚îÄ CLASES ‚îÄ‚îÄ‚îÄ -->
        <section id="clases-section" class="docs-section scroll-mt-20" data-section-id="clases">
          <div class="docs-section-header">
            <span class="docs-section-badge">‚öîÔ∏è Clases</span>
            <h2 class="docs-h2">Clases de personaje</h2>
            <p class="docs-p text-[#555137]">Las clases definen las habilidades principales de tu personaje ‚Äî su estilo de combate, magia y rol en el grupo.</p>
          </div>

          {CLASSES.map((entry, i) => (
            <article id={entry.id} class="docs-entry scroll-mt-20" data-section-id={entry.id} data-search-name={entry.nombre.toLowerCase()} data-search-category="clases">
              <div class="docs-entry-header">
                <span class="docs-entry-icon">{entry.icon}</span>
                <div>
                  <h3 class="docs-h3">{entry.nombre}</h3>
                  <span class="docs-tag">Clase</span>
                </div>
                <a href={`#${entry.id}`} class="docs-anchor" title="Enlace directo">#</a>
              </div>
              <p class="docs-p">{entry.descripcion}</p>
              <div class="docs-stats-grid">
                {entry.details.map(d => (
                  <div class="docs-stat">
                    <dt class="docs-stat-label">{d.label}</dt>
                    <dd class="docs-stat-value">{d.value}</dd>
                  </div>
                ))}
              </div>
              {i < CLASSES.length - 1 && <div class="docs-entry-divider"></div>}
            </article>
          ))}
        </section>

        <div class="docs-divider"></div>

        <!-- ‚îÄ‚îÄ‚îÄ TRASFONDOS ‚îÄ‚îÄ‚îÄ -->
        <section id="trasfondos-section" class="docs-section scroll-mt-20" data-section-id="trasfondos">
          <div class="docs-section-header">
            <span class="docs-section-badge">üìñ Trasfondos</span>
            <h2 class="docs-h2">Trasfondos</h2>
            <p class="docs-p text-[#555137]">Los trasfondos describen el origen de tu personaje antes de la aventura, otorgando habilidades, equipo y rasgos narrativos.</p>
          </div>

          {BACKGROUNDS.map((entry, i) => (
            <article id={entry.id} class="docs-entry scroll-mt-20" data-section-id={entry.id} data-search-name={entry.nombre.toLowerCase()} data-search-category="trasfondos">
              <div class="docs-entry-header">
                <span class="docs-entry-icon">{entry.icon}</span>
                <div>
                  <h3 class="docs-h3">{entry.nombre}</h3>
                  <span class="docs-tag">Trasfondo</span>
                </div>
                <a href={`#${entry.id}`} class="docs-anchor" title="Enlace directo">#</a>
              </div>
              <p class="docs-p">{entry.descripcion}</p>
              <div class="docs-stats-grid">
                {entry.details.map(d => (
                  <div class="docs-stat">
                    <dt class="docs-stat-label">{d.label}</dt>
                    <dd class="docs-stat-value">{d.value}</dd>
                  </div>
                ))}
              </div>
              {i < BACKGROUNDS.length - 1 && <div class="docs-entry-divider"></div>}
            </article>
          ))}
        </section>

        <!-- Footer attribution -->
        <footer class="docs-footer">
          <p>Contenido basado en el System Reference Document 5.1 (SRD 5.1) de Wizards of the Coast, disponible bajo la Open Gaming License (OGL 1.0a).</p>
          <p class="mt-2">No afiliado con Wizards of the Coast.</p>
        </footer>

      </div>
    </main>
  </div>

  <!-- ‚ïê‚ïê‚ïê SEARCH MODAL (Cmd+K) ‚ïê‚ïê‚ïê -->
  <div id="search-modal" class="docs-search-modal hidden">
    <div class="docs-search-backdrop"></div>
    <div class="docs-search-dialog">
      <div class="docs-search-input-wrap">
        <svg class="w-5 h-5 text-[#978F62] shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <input id="search-input" type="text" placeholder="Buscar razas, clases, trasfondos..." class="docs-search-input" autocomplete="off" />
        <kbd class="docs-kbd text-[10px]">Esc</kbd>
      </div>
      <div id="search-results" class="docs-search-results">
        <div class="docs-search-empty">
          <span class="text-2xl mb-2">üîç</span>
          <span class="text-[13px] text-[#978F62]">Escribe para buscar en el compendio</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê STYLES ‚ïê‚ïê‚ïê -->
  <style>
    /* ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ */
    .docs-header {
      position: sticky; top: 0; z-index: 40;
      background: rgba(240, 239, 232, 0.92);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(212, 209, 189, 0.35);
      height: 56px;
    }
    .docs-header-inner {
      max-width: 1400px; margin: 0 auto;
      display: flex; align-items: center; justify-content: space-between;
      height: 100%; padding: 0 1.5rem;
      gap: 1rem;
    }
    .docs-logo {
      display: flex; align-items: center; gap: 0.5rem;
      text-decoration: none; flex-shrink: 0;
    }
    .docs-logo:hover img { transform: scale(1.1); }
    .docs-logo img { transition: transform 0.2s; }

    .docs-search-trigger {
      display: flex; align-items: center; gap: 0.6rem;
      background: white; border: 1px solid rgba(212, 209, 189, 0.4);
      border-radius: 10px; padding: 0.45rem 0.9rem;
      cursor: pointer; transition: all 0.2s;
      max-width: 400px; width: 100%; flex: 1;
    }
    .docs-search-trigger:hover { border-color: rgba(143, 61, 56, 0.3); box-shadow: 0 1px 4px rgba(0,0,0,0.04); }
    .docs-kbd {
      font-family: Inter, system-ui, sans-serif; font-size: 11px; font-weight: 500;
      background: #f5f4ef; border: 1px solid rgba(212, 209, 189, 0.5);
      border-radius: 5px; padding: 1px 6px; color: #978F62;
      margin-left: auto; flex-shrink: 0;
    }

    /* ‚îÄ‚îÄ‚îÄ Mobile toggle ‚îÄ‚îÄ‚îÄ */
    .docs-sidebar-toggle {
      position: fixed; bottom: 1.25rem; right: 1.25rem; z-index: 45;
      width: 48px; height: 48px; border-radius: 14px;
      background: #8f3d38; color: white; border: none;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 20px rgba(143, 61, 56, 0.35);
      cursor: pointer; transition: all 0.2s;
    }
    .docs-sidebar-toggle:hover { transform: scale(1.05); }

    .docs-backdrop {
      position: fixed; inset: 0; z-index: 35;
      background: rgba(0,0,0,0.3); backdrop-filter: blur(2px);
    }

    /* ‚îÄ‚îÄ‚îÄ Layout shell ‚îÄ‚îÄ‚îÄ */
    .docs-shell {
      display: flex; min-height: calc(100vh - 56px);
      max-width: 1400px; margin: 0 auto;
    }

    /* ‚îÄ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ‚îÄ */
    .docs-sidebar {
      width: 260px; flex-shrink: 0;
      border-right: 1px solid rgba(212, 209, 189, 0.3);
      position: sticky; top: 56px;
      height: calc(100vh - 56px);
      overflow: hidden;
      background: #F0EFE8;
    }
    .docs-sidebar-inner {
      height: 100%; overflow-y: auto; overflow-x: hidden;
      display: flex; flex-direction: column;
      padding: 0;
      scrollbar-width: thin;
      scrollbar-color: rgba(212,209,189,0.5) transparent;
    }
    .docs-sidebar-inner::-webkit-scrollbar { width: 4px; }
    .docs-sidebar-inner::-webkit-scrollbar-thumb { background: rgba(212,209,189,0.5); border-radius: 4px; }
    .docs-sidebar-header { padding: 1.25rem 1.25rem 1rem; border-bottom: 1px solid rgba(212,209,189,0.25); }

    .docs-nav { flex: 1; padding: 0.75rem 0.75rem; }
    .docs-nav-link {
      display: flex; align-items: center; gap: 0.5rem;
      padding: 0.5rem 0.65rem; border-radius: 8px;
      font-size: 13px; color: #555137; text-decoration: none;
      transition: all 0.15s; margin-bottom: 2px;
    }
    .docs-nav-link:hover { color: #272519; background: rgba(39,37,25,0.04); }
    .docs-nav-link-active { color: #8f3d38; background: rgba(143,61,56,0.06); font-weight: 600; }

    .docs-nav-group { margin-top: 0.5rem; }
    .docs-nav-group-btn {
      display: flex; align-items: center; justify-content: space-between; width: 100%;
      background: none; border: none; cursor: pointer;
      padding: 0.5rem 0.65rem; border-radius: 8px;
      font-size: 13px; font-weight: 600; color: #272519;
      transition: all 0.15s; text-align: left;
    }
    .docs-nav-group-btn:hover { background: rgba(39,37,25,0.04); }
    .docs-nav-badge {
      font-size: 10px; font-weight: 600; color: #978F62;
      background: rgba(212,209,189,0.3); border-radius: 6px;
      padding: 1px 6px; min-width: 20px; text-align: center;
    }
    .docs-nav-chevron {
      width: 14px; height: 14px; color: #978F62;
      transition: transform 0.2s;
    }
    .docs-nav-group-btn[aria-expanded="true"] .docs-nav-chevron { transform: rotate(180deg); }

    .docs-nav-group-items {
      overflow: hidden; max-height: 0;
      transition: max-height 0.25s ease;
      padding-left: 0.5rem;
    }
    .docs-nav-group-items.open { max-height: 600px; }
    .docs-nav-item {
      display: flex; align-items: center; gap: 0.5rem;
      padding: 0.35rem 0.65rem; border-radius: 6px;
      font-size: 12.5px; color: #555137; text-decoration: none;
      transition: all 0.15s; margin: 1px 0;
      border-left: 2px solid transparent; margin-left: 0.25rem;
    }
    .docs-nav-item:hover { color: #272519; background: rgba(39,37,25,0.03); }
    .docs-nav-item.active { color: #8f3d38; border-left-color: #8f3d38; font-weight: 500; background: rgba(143,61,56,0.04); }
    .docs-nav-dot {
      width: 4px; height: 4px; border-radius: 50%;
      background: rgba(151,143,98,0.4); flex-shrink: 0;
    }
    .docs-nav-item.active .docs-nav-dot { background: #8f3d38; }

    .docs-sidebar-footer { padding: 1rem 1.25rem; border-top: 1px solid rgba(212,209,189,0.25); margin-top: auto; }

    /* ‚îÄ‚îÄ‚îÄ Main content ‚îÄ‚îÄ‚îÄ */
    .docs-main {
      flex: 1; min-width: 0;
      padding: 2rem 2.5rem 4rem;
    }
    .docs-content { max-width: 780px; }

    .docs-breadcrumbs {
      display: flex; align-items: center; gap: 0.4rem;
      font-size: 12px; color: #978F62; margin-bottom: 2rem;
    }
    .docs-breadcrumbs a { color: #978F62; text-decoration: none; }
    .docs-breadcrumbs a:hover { color: #8f3d38; }

    /* ‚îÄ‚îÄ‚îÄ Typography ‚îÄ‚îÄ‚îÄ */
    .docs-h1 {
      font-family: 'Cinzel', serif; font-weight: 700;
      font-size: clamp(1.75rem, 4vw, 2.25rem); line-height: 1.2;
      color: #272519; margin-bottom: 0.75rem;
    }
    .docs-lead { font-size: 16px; color: #555137; line-height: 1.7; max-width: 600px; }
    .docs-h2 {
      font-family: 'Cinzel', serif; font-weight: 700;
      font-size: 1.5rem; color: #272519; margin-bottom: 0.5rem;
    }
    .docs-h3 {
      font-family: 'Cinzel', serif; font-weight: 700;
      font-size: 1.125rem; color: #272519;
    }
    .docs-p { font-size: 14px; color: #555137; line-height: 1.75; margin-top: 0.5rem; }

    /* ‚îÄ‚îÄ‚îÄ Callout ‚îÄ‚îÄ‚îÄ */
    .docs-callout {
      display: flex; gap: 0.85rem; padding: 1rem 1.15rem;
      background: white; border: 1px solid rgba(212,209,189,0.4);
      border-radius: 12px; margin-top: 1.5rem;
      border-left: 3px solid #8f3d38;
    }
    .docs-callout-icon { font-size: 1.25rem; flex-shrink: 0; margin-top: 1px; }

    /* ‚îÄ‚îÄ‚îÄ Summary cards ‚îÄ‚îÄ‚îÄ */
    .docs-summary-card {
      display: flex; flex-direction: column; align-items: center;
      padding: 1.25rem 1rem; border-radius: 12px;
      border: 1px solid rgba(212,209,189,0.3);
      background: white; text-decoration: none;
      transition: all 0.2s;
    }
    .docs-summary-card:hover {
      border-color: rgba(143,61,56,0.25);
      box-shadow: 0 2px 12px rgba(143,61,56,0.08);
      transform: translateY(-1px);
    }

    /* ‚îÄ‚îÄ‚îÄ Section ‚îÄ‚îÄ‚îÄ */
    .docs-section { margin-bottom: 0; }
    .docs-section-header { margin-bottom: 2rem; }
    .docs-section-badge {
      font-size: 12px; font-weight: 600; color: #8f3d38;
      background: rgba(143,61,56,0.06); border-radius: 6px;
      padding: 3px 10px; display: inline-block; margin-bottom: 0.75rem;
    }
    .docs-divider {
      height: 1px; background: rgba(212,209,189,0.35);
      margin: 3rem 0;
    }

    /* ‚îÄ‚îÄ‚îÄ Entry ‚îÄ‚îÄ‚îÄ */
    .docs-entry { padding: 0; }
    .docs-entry-header {
      display: flex; align-items: flex-start; gap: 0.85rem; margin-bottom: 0.5rem;
      position: relative;
    }
    .docs-entry-icon { font-size: 1.75rem; flex-shrink: 0; margin-top: 2px; }
    .docs-tag {
      font-size: 10px; font-weight: 600; color: #978F62;
      background: rgba(212,209,189,0.25); border-radius: 4px;
      padding: 1px 7px; margin-top: 4px; display: inline-block;
      text-transform: uppercase; letter-spacing: 0.06em;
    }
    .docs-anchor {
      position: absolute; right: 0; top: 0;
      font-size: 18px; color: rgba(151,143,98,0.3);
      text-decoration: none; font-weight: 600;
      opacity: 0; transition: opacity 0.15s;
    }
    .docs-entry:hover .docs-anchor { opacity: 1; }
    .docs-anchor:hover { color: #8f3d38; }

    .docs-stats-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 0.5rem; margin-top: 1rem;
    }
    .docs-stat {
      padding: 0.65rem 0.85rem; border-radius: 8px;
      background: white; border: 1px solid rgba(212,209,189,0.25);
    }
    .docs-stat-label { font-size: 11px; font-weight: 600; color: #978F62; text-transform: uppercase; letter-spacing: 0.04em; margin-bottom: 2px; }
    .docs-stat-value { font-size: 13px; color: #272519; }

    .docs-entry-divider { height: 1px; background: rgba(212,209,189,0.2); margin: 2rem 0; }

    /* ‚îÄ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ */
    .docs-footer {
      margin-top: 3rem; padding-top: 2rem;
      border-top: 1px solid rgba(212,209,189,0.3);
      font-size: 12px; color: #978F62; text-align: center;
      line-height: 1.6;
    }

    /* ‚îÄ‚îÄ‚îÄ Search Modal ‚îÄ‚îÄ‚îÄ */
    .docs-search-modal {
      position: fixed; inset: 0; z-index: 100;
      display: flex; align-items: flex-start; justify-content: center;
      padding-top: min(15vh, 120px);
    }
    .docs-search-modal.hidden { display: none; }
    .docs-search-backdrop {
      position: absolute; inset: 0;
      background: rgba(39,37,25,0.4); backdrop-filter: blur(4px);
    }
    .docs-search-dialog {
      position: relative; width: 90%; max-width: 560px;
      background: white; border-radius: 16px;
      box-shadow: 0 25px 60px rgba(0,0,0,0.18);
      overflow: hidden; border: 1px solid rgba(212,209,189,0.3);
    }
    .docs-search-input-wrap {
      display: flex; align-items: center; gap: 0.7rem;
      padding: 0.85rem 1.15rem;
      border-bottom: 1px solid rgba(212,209,189,0.3);
    }
    .docs-search-input {
      flex: 1; border: none; outline: none; background: none;
      font-size: 15px; color: #272519;
      font-family: 'Crimson Text', serif;
    }
    .docs-search-input::placeholder { color: rgba(151,143,98,0.5); }
    .docs-search-results {
      max-height: 380px; overflow-y: auto; padding: 0.5rem;
      scrollbar-width: thin;
    }
    .docs-search-empty {
      display: flex; flex-direction: column; align-items: center;
      padding: 2.5rem 1rem; gap: 0.25rem;
    }
    .docs-search-result {
      display: flex; align-items: center; gap: 0.75rem;
      padding: 0.6rem 0.85rem; border-radius: 10px;
      cursor: pointer; text-decoration: none; color: inherit;
      transition: background 0.12s;
    }
    .docs-search-result:hover, .docs-search-result.focused { background: rgba(143,61,56,0.06); }
    .docs-search-result-icon { font-size: 1.25rem; flex-shrink: 0; }
    .docs-search-result-name { font-size: 14px; font-weight: 600; color: #272519; }
    .docs-search-result-cat { font-size: 11px; color: #978F62; margin-top: 1px; }
    .docs-search-no-results {
      padding: 2rem 1rem; text-align: center;
      font-size: 13px; color: #978F62;
    }

    /* ‚îÄ‚îÄ‚îÄ Mobile responsive ‚îÄ‚îÄ‚îÄ */
    @media (max-width: 1023px) {
      .docs-sidebar {
        position: fixed; left: 0; top: 56px; z-index: 38;
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
        box-shadow: 4px 0 20px rgba(0,0,0,0.1);
        width: 280px;
      }
      .docs-sidebar.open { transform: translateX(0); }
      .docs-main { padding: 1.5rem 1.25rem 3rem; }
    }
    @media (max-width: 640px) {
      .docs-search-trigger span { display: none; }
      .docs-search-trigger { max-width: 44px; padding: 0.45rem 0.6rem; justify-content: center; }
      .docs-search-trigger .docs-kbd { display: none; }
      .docs-stats-grid { grid-template-columns: 1fr; }
    }
  </style>

  <!-- ‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê -->
  <script>
    // Build search data from DOM
    const entries = Array.from(document.querySelectorAll('[data-search-name]')).map(el => ({
      id: el.id,
      nombre: el.querySelector('.docs-h3')?.textContent || '',
      icon: el.querySelector('.docs-entry-icon')?.textContent || '',
      category: (el as HTMLElement).dataset.searchCategory || '',
      categoryLabel: (el as HTMLElement).dataset.searchCategory === 'razas' ? 'Raza' :
                     (el as HTMLElement).dataset.searchCategory === 'clases' ? 'Clase' : 'Trasfondo',
    }));

    // ‚îÄ‚îÄ‚îÄ Sidebar toggle (mobile) ‚îÄ‚îÄ‚îÄ
    const sidebar = document.getElementById('sidebar')!;
    const sidebarToggle = document.getElementById('sidebar-toggle')!;
    const backdrop = document.getElementById('sidebar-backdrop')!;

    function toggleSidebar(open?: boolean) {
      const isOpen = open ?? !sidebar.classList.contains('open');
      sidebar.classList.toggle('open', isOpen);
      backdrop.classList.toggle('hidden', !isOpen);
      document.body.style.overflow = isOpen ? 'hidden' : '';
    }
    sidebarToggle.addEventListener('click', () => toggleSidebar());
    backdrop.addEventListener('click', () => toggleSidebar(false));

    // Close sidebar on nav click (mobile)
    sidebar.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => {
        if (window.innerWidth < 1024) toggleSidebar(false);
      });
    });

    // ‚îÄ‚îÄ‚îÄ Sidebar collapsible groups ‚îÄ‚îÄ‚îÄ
    document.querySelectorAll('.docs-nav-group-btn').forEach(btn => {
      const group = btn.closest('.docs-nav-group')!;
      const items = group.querySelector('.docs-nav-group-items') as HTMLElement;

      // Start all expanded
      items.classList.add('open');
      btn.setAttribute('aria-expanded', 'true');

      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        items.classList.toggle('open', !expanded);
      });
    });

    // ‚îÄ‚îÄ‚îÄ Active nav tracking (IntersectionObserver) ‚îÄ‚îÄ‚îÄ
    const navItems = document.querySelectorAll('[data-nav]');
    const sectionTargets = document.querySelectorAll('[data-section-id]');

    const observer = new IntersectionObserver((obs) => {
      obs.forEach(entry => {
        if (entry.isIntersecting) {
          const id = (entry.target as HTMLElement).dataset.sectionId!;
          navItems.forEach(n => {
            const navId = (n as HTMLElement).dataset.nav!;
            n.classList.toggle('active', navId === id);
            n.classList.toggle('docs-nav-link-active', navId === id && n.classList.contains('docs-nav-link'));
          });
        }
      });
    }, { rootMargin: '-80px 0px -60% 0px', threshold: 0 });

    sectionTargets.forEach(s => observer.observe(s));

    // ‚îÄ‚îÄ‚îÄ Search modal (Ctrl+K) ‚îÄ‚îÄ‚îÄ
    const modal = document.getElementById('search-modal')!;
    const searchInput = document.getElementById('search-input') as HTMLInputElement;
    const searchResults = document.getElementById('search-results')!;
    const searchTrigger = document.getElementById('search-trigger')!;
    let focusedIdx = -1;

    function openSearch() {
      modal.classList.remove('hidden');
      searchInput.value = '';
      renderResults('');
      focusedIdx = -1;
      requestAnimationFrame(() => searchInput.focus());
      document.body.style.overflow = 'hidden';
    }
    function closeSearch() {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }

    searchTrigger.addEventListener('click', openSearch);
    modal.querySelector('.docs-search-backdrop')!.addEventListener('click', closeSearch);

    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') { e.preventDefault(); openSearch(); }
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) { closeSearch(); }
    });

    function renderResults(q: string) {
      if (!q.trim()) {
        searchResults.innerHTML = '<div class="docs-search-empty"><span class="text-2xl mb-2">üîç</span><span class="text-[13px] text-[#978F62]">Escribe para buscar en el compendio</span></div>';
        return;
      }
      const lower = q.toLowerCase();
      const matches = entries.filter(e => e.nombre.toLowerCase().includes(lower));
      if (!matches.length) {
        searchResults.innerHTML = '<div class="docs-search-no-results">Sin resultados para "' + q + '"</div>';
        return;
      }
      searchResults.innerHTML = matches.map((m, i) =>
        '<a href="#' + m.id + '" class="docs-search-result' + (i === 0 ? ' focused' : '') + '" data-idx="' + i + '">' +
          '<span class="docs-search-result-icon">' + m.icon + '</span>' +
          '<div>' +
            '<div class="docs-search-result-name">' + m.nombre + '</div>' +
            '<div class="docs-search-result-cat">' + m.categoryLabel + '</div>' +
          '</div>' +
        '</a>'
      ).join('');
      focusedIdx = 0;

      searchResults.querySelectorAll('.docs-search-result').forEach(r => {
        r.addEventListener('click', (e) => {
          e.preventDefault();
          closeSearch();
          const href = (r as HTMLAnchorElement).getAttribute('href')!;
          document.querySelector(href)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      });
    }

    searchInput.addEventListener('input', () => renderResults(searchInput.value));
    searchInput.addEventListener('keydown', (e) => {
      const items = searchResults.querySelectorAll('.docs-search-result');
      if (!items.length) return;
      if (e.key === 'ArrowDown') { e.preventDefault(); focusedIdx = Math.min(focusedIdx + 1, items.length - 1); }
      if (e.key === 'ArrowUp') { e.preventDefault(); focusedIdx = Math.max(focusedIdx - 1, 0); }
      if (e.key === 'Enter' && focusedIdx >= 0) {
        e.preventDefault();
        (items[focusedIdx] as HTMLAnchorElement).click();
      }
      items.forEach((it, i) => it.classList.toggle('focused', i === focusedIdx));
      items[focusedIdx]?.scrollIntoView({ block: 'nearest' });
    });
  </script>

</Layout>
