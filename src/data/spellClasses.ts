// ─── Spell → Class mapping ──────────────────────────────────────────
// Maps spell IDs to the class IDs that can cast them (from SRD 5.1).
// Used by the compendium to show class tags on spell cards and enable filtering.
// Source: DyMEsApp/src/data/srd/spells.ts

export type CasterClassId = 'bardo' | 'brujo' | 'clerigo' | 'druida' | 'explorador' | 'hechicero' | 'mago' | 'paladin';

export const CASTER_CLASS_NAMES: Record<CasterClassId, string> = {
  bardo: 'Bardo',
  brujo: 'Brujo',
  clerigo: 'Clérigo',
  druida: 'Druida',
  explorador: 'Explorador',
  hechicero: 'Hechicero',
  mago: 'Mago',
  paladin: 'Paladín',
};

export const CASTER_CLASS_COLORS: Record<CasterClassId, string> = {
  bardo: '#8B5CF6',
  brujo: '#6D28D9',
  clerigo: '#F59E0B',
  druida: '#10B981',
  explorador: '#059669',
  hechicero: '#EF4444',
  mago: '#3B82F6',
  paladin: '#F97316',
};

/** Mapping: spell id → array of CasterClassId */
export const SPELL_CLASS_MAP: Record<string, CasterClassId[]> = {
  // Trucos (Nivel 0)
  agarre_electrizante: ['hechicero', 'mago'],
  burla_danina: ['bardo'],
  crear_llama: ['druida'],
  descarga_de_fuego: ['hechicero', 'mago'],
  descarga_sobrenatural: ['brujo'],
  guia: ['clerigo', 'druida'],
  ilusion_menor: ['bardo', 'brujo', 'hechicero', 'mago'],
  impacto_certero: ['bardo', 'hechicero', 'brujo', 'mago'],
  llama_sagrada: ['clerigo'],
  luces_danzantes: ['bardo', 'hechicero', 'mago'],
  luz: ['bardo', 'clerigo', 'hechicero', 'mago'],
  mano_de_mago: ['bardo', 'hechicero', 'brujo', 'mago'],
  mensaje: ['bardo', 'hechicero', 'mago'],
  piedad_con_los_moribundos: ['clerigo'],
  prestidigitacion: ['bardo', 'hechicero', 'brujo', 'mago'],
  rayo_de_escarcha: ['hechicero', 'mago'],
  reparar: ['bardo', 'clerigo', 'druida', 'hechicero', 'mago'],
  resistencia: ['clerigo', 'druida'],
  rociada_venenosa: ['druida', 'hechicero', 'brujo', 'mago'],
  saber_druidico: ['druida'],
  salpicadura_acida: ['hechicero', 'mago'],
  shillelagh: ['druida'],
  taumaturgia: ['clerigo'],
  toque_helado: ['hechicero', 'brujo', 'mago'],

  // Nivel 1
  alarma: ['explorador', 'mago'],
  armadura_de_mago: ['hechicero', 'mago'],
  bendicion: ['clerigo', 'paladin'],
  buenas_bayas: ['druida', 'explorador'],
  caida_de_pluma: ['bardo', 'hechicero', 'mago'],
  crear_o_destruir_agua: ['clerigo', 'druida'],
  curar_heridas: ['bardo', 'clerigo', 'druida', 'paladin', 'explorador'],
  detectar_el_bien_y_el_mal: ['clerigo', 'paladin'],
  detectar_magia: ['bardo', 'clerigo', 'druida', 'hechicero', 'mago', 'paladin', 'explorador'],
  detectar_venenos_y_enfermedades: ['clerigo', 'druida', 'paladin', 'explorador'],
  disco_flotante: ['mago'],
  disfrazarse: ['bardo', 'hechicero', 'mago'],
  dormir: ['bardo', 'hechicero', 'mago'],
  encantar_animal: ['bardo', 'druida', 'explorador'],
  encontrar_familiar: ['mago'],
  enmaranar: ['druida'],
  entender_idiomas: ['bardo', 'hechicero', 'brujo', 'mago'],
  escudo: ['hechicero', 'mago'],
  escudo_de_fe: ['clerigo', 'paladin'],
  falsa_vida: ['hechicero', 'mago'],
  favor_divino: ['paladin'],
  fuego_feerico: ['druida'],
  grasa: ['mago'],
  hablar_con_los_animales: ['bardo', 'druida', 'explorador'],
  hechizar_persona: ['bardo', 'brujo', 'druida', 'hechicero', 'mago'],
  heroismo: ['bardo', 'paladin'],
  identificar: ['bardo', 'mago'],
  imagen_silenciosa: ['bardo', 'hechicero', 'mago'],
  infligir_heridas: ['clerigo'],
  manos_ardientes: ['hechicero', 'mago'],
  marca_del_cazador: ['explorador'],
  nube_de_oscurecimiento: ['druida', 'hechicero', 'mago', 'explorador'],
  ola_atronadora: ['bardo', 'druida', 'hechicero', 'mago'],
  orden_imperiosa: ['clerigo', 'paladin'],
  palabra_de_curacion: ['bardo', 'clerigo'],
  perdicion: ['clerigo'],
  proteccion_contra_el_bien_y_el_mal: ['clerigo', 'brujo', 'mago', 'paladin'],
  proyectil_magico: ['hechicero', 'mago'],
  purificar_comida_y_bebida: ['clerigo', 'druida', 'paladin'],
  reprension_infernal: ['brujo'],
  retirada_expeditiva: ['hechicero', 'brujo', 'mago'],
  risa_horrible: ['bardo', 'mago'],
  rociada_de_color: ['hechicero', 'mago'],
  saeta_guia: ['clerigo'],
  salto: ['druida', 'hechicero', 'mago', 'explorador'],
  santuario: ['clerigo'],
  sirviente_invisible: ['mago'],
  texto_ilusorio: ['bardo', 'brujo', 'mago'],
  zancada_prodigiosa: ['bardo', 'druida', 'explorador', 'mago'],

  // Nivel 2
  abrir: ['bardo', 'hechicero', 'mago'],
  agrandar_reducir: ['hechicero', 'mago'],
  alterar_el_propio_aspecto: ['hechicero', 'mago'],
  arma_espiritual: ['clerigo'],
  arma_magica: ['paladin', 'mago'],
  augurio: ['clerigo'],
  aura_magica_de_arcanista: ['mago'],
  auxilio: ['clerigo', 'paladin'],
  boca_magica: ['bardo', 'mago'],
  calentar_metal: ['bardo', 'druida'],
  calmar_emociones: ['bardo', 'clerigo'],
  castigo_marcador: ['paladin'],
  cerradura_arcana: ['mago'],
  contorno_borroso: ['hechicero', 'mago'],
  crecimiento_espinoso: ['druida', 'explorador'],
  detectar_pensamientos: ['bardo', 'hechicero', 'mago'],
  detectar_trampas: ['clerigo', 'druida', 'explorador'],
  dulce_descanso: ['clerigo', 'mago'],
  embelesar: ['bardo', 'druida'],
  esfera_de_llamas: ['druida', 'mago'],
  flecha_acida: ['mago'],
  hacer_anicos: ['bardo', 'brujo', 'hechicero', 'mago'],
  hallar_corcel: ['paladin'],
  hoja_de_fuego: ['druida'],
  imagen_multiple: ['bardo', 'hechicero', 'mago'],
  inmovilizar_persona: ['bardo', 'brujo', 'clerigo', 'druida', 'hechicero', 'mago'],
  invisibilidad: ['bardo', 'brujo', 'hechicero', 'mago'],
  levitar: ['hechicero', 'mago'],
  llama_permanente: ['clerigo'],
  localizar_animales_o_plantas: ['bardo', 'druida', 'explorador'],
  localizar_objeto: ['bardo', 'clerigo', 'druida', 'mago', 'paladin', 'explorador'],
  mensajero_animal: ['bardo', 'druida', 'explorador'],
  oscuridad: ['brujo', 'hechicero', 'mago'],
  pasar_sin_rastro: ['druida', 'explorador'],
  paso_brumoso: ['hechicero', 'brujo', 'mago'],
  piel_robliza: ['druida', 'explorador'],
  plegaria_de_curacion: ['clerigo'],
  potenciar_caracteristica: ['bardo', 'clerigo', 'druida', 'hechicero', 'mago'],
  proteccion_contra_veneno: ['clerigo', 'druida', 'paladin', 'explorador'],
  rafaga_de_viento: ['druida', 'hechicero', 'mago'],
  rayo_abrasador: ['hechicero', 'mago'],
  rayo_de_luna: ['druida'],
  rayo_debilitador: ['brujo', 'mago'],
  restablecimiento_menor: ['bardo', 'clerigo', 'druida', 'paladin', 'explorador'],
  silencio: ['bardo', 'clerigo', 'explorador'],
  sordera_ceguera: ['bardo', 'clerigo', 'hechicero', 'mago'],
  sugestion: ['bardo', 'brujo', 'hechicero', 'mago'],
  telarana: ['hechicero', 'mago'],
  trepar_cual_aracnido: ['hechicero', 'brujo', 'mago'],
  truco_de_la_cuerda: ['mago'],
  ver_invisibilidad: ['bardo', 'hechicero', 'mago'],
  vinculo_protector: ['clerigo'],
  vision_en_la_oscuridad: ['druida', 'explorador', 'hechicero', 'mago'],
  zona_de_la_verdad: ['bardo', 'clerigo', 'paladin'],

  // Nivel 3
  acelerar: ['hechicero', 'mago'],
  animar_a_los_muertos: ['clerigo', 'mago'],
  bola_de_fuego: ['hechicero', 'mago'],
  caminar_sobre_el_agua: ['clerigo', 'druida', 'explorador', 'hechicero'],
  circulo_magico: ['clerigo', 'mago', 'paladin', 'brujo'],
  clarividencia: ['bardo', 'clerigo', 'hechicero', 'mago'],
  conjurar_animales: ['druida', 'explorador'],
  contrahechizo: ['hechicero', 'brujo', 'mago'],
  corcel_fantasma: ['mago'],
  crear_comida_y_agua: ['clerigo', 'paladin'],
  crecimiento_vegetal: ['bardo', 'druida', 'explorador'],
  desplazamiento: ['mago'],
  disipar_magia: ['bardo', 'clerigo', 'druida', 'hechicero', 'mago', 'paladin', 'brujo'],
  don_de_lenguas: ['bardo', 'clerigo', 'hechicero', 'mago', 'brujo'],
  espiritus_guardianes: ['clerigo'],
  forma_gaseosa: ['brujo', 'hechicero', 'mago'],
  fundirse_con_la_piedra: ['clerigo', 'druida'],
  glifo_custodio: ['bardo', 'clerigo', 'mago'],
  hablar_con_las_plantas: ['bardo', 'druida', 'explorador'],
  hablar_con_los_muertos: ['bardo', 'clerigo'],
  imagen_mayor: ['bardo', 'hechicero', 'brujo', 'mago'],
  imponer_maldicion: ['bardo', 'clerigo', 'mago'],
  indetectable: ['bardo', 'explorador', 'mago'],
  levantar_maldicion: ['clerigo', 'mago', 'paladin'],
  llamar_al_relampago: ['druida'],
  luz_del_dia: ['clerigo', 'druida', 'hechicero', 'paladin'],
  muro_de_viento: ['druida', 'explorador'],
  nube_apestosa: ['bardo', 'hechicero', 'mago'],
  palabra_de_curacion_en_masa: ['clerigo'],
  patron_hipnotico: ['bardo', 'hechicero', 'brujo', 'mago'],
  pequena_choza: ['bardo', 'mago'],
  proteccion_contra_energia: ['clerigo', 'druida', 'hechicero', 'mago', 'explorador'],
  ralentizar: ['hechicero', 'mago'],
  recado: ['bardo', 'clerigo', 'mago'],
  relampago: ['hechicero', 'mago'],
  respirar_bajo_el_agua: ['druida', 'hechicero', 'mago', 'explorador'],
  revivir: ['clerigo', 'paladin'],
  senal_de_esperanza: ['clerigo'],
  terror: ['bardo', 'hechicero', 'brujo', 'mago'],
  toque_vampirico: ['brujo', 'mago'],
  tormenta_de_aguanieve: ['druida', 'hechicero', 'mago'],
  volar: ['hechicero', 'brujo', 'mago'],

  // Nivel 4
  adivinacion: ['clerigo'],
  asesino_fantasmal: ['mago'],
  cofre_oculto: ['mago'],
  compulsion: ['bardo'],
  confusion: ['bardo', 'druida', 'hechicero', 'mago'],
  conjurar_elementales_menores: ['druida', 'mago'],
  conjurar_seres_del_bosque: ['druida', 'explorador'],
  controlar_agua: ['clerigo', 'druida', 'mago'],
  destierro: ['clerigo', 'hechicero', 'brujo', 'mago', 'paladin'],
  dominar_bestia: ['druida', 'hechicero'],
  escudo_de_fuego: ['mago'],
  esfera_elastica: ['mago'],
  fabricar: ['mago'],
  guarda_contra_la_muerte: ['clerigo', 'paladin'],
  guardian_de_la_fe: ['clerigo'],
  insecto_gigante: ['druida'],
  invisibilidad_mejorada: ['bardo', 'hechicero', 'mago'],
  libertad_de_movimiento: ['bardo', 'clerigo', 'druida', 'explorador', 'paladin'],
  localizar_criatura: ['bardo', 'clerigo', 'druida', 'mago', 'paladin', 'explorador'],
  marchitar: ['druida', 'hechicero', 'brujo', 'mago'],
  mastin_fiel: ['mago'],
  moldear_la_piedra: ['clerigo', 'druida'],
  muro_de_fuego: ['druida', 'hechicero', 'mago'],
  ojo_arcano: ['mago'],
  piel_petrea: ['druida', 'hechicero', 'mago', 'explorador'],
  polimorfar: ['bardo', 'druida', 'hechicero', 'mago'],
  puerta_dimensional: ['bardo', 'hechicero', 'brujo', 'mago'],
  sanctasanctorum_privado: ['mago'],
  tentaculos_negros: ['mago'],
  terreno_alucinatorio: ['bardo', 'druida', 'brujo', 'mago'],
  tormenta_de_hielo: ['druida', 'hechicero', 'mago'],

  // Nivel 5
  alterar_los_recuerdos: ['bardo', 'mago'],
  alzar_a_los_muertos: ['bardo', 'clerigo', 'paladin'],
  animar_objetos: ['bardo', 'hechicero', 'mago'],
  apariencia: ['bardo', 'hechicero', 'mago'],
  atadura_planar: ['bardo', 'clerigo', 'druida', 'mago'],
  caparazon_antivida: ['druida'],
  circulo_de_teletransportacion: ['bardo', 'hechicero', 'mago'],
  comunion: ['clerigo'],
  comunion_con_la_naturaleza: ['druida', 'explorador'],
  conjurar_elemental: ['druida', 'mago'],
  cono_de_frio: ['hechicero', 'mago'],
  conocer_las_leyendas: ['bardo', 'clerigo', 'mago'],
  consagrar: ['clerigo'],
  contactar_con_otro_plano: ['brujo', 'mago'],
  contagio: ['clerigo', 'druida'],
  creacion: ['hechicero', 'mago'],
  curar_heridas_en_masa: ['bardo', 'clerigo', 'druida'],
  despertar: ['bardo', 'druida'],
  disipar_el_bien_y_el_mal: ['clerigo', 'paladin'],
  dominar_persona: ['bardo', 'hechicero', 'mago'],
  enganar: ['bardo', 'brujo', 'mago'],
  enlace_telepatico: ['mago'],
  ensueno: ['bardo', 'brujo', 'mago'],
  escudrinar: ['bardo', 'clerigo', 'druida', 'brujo', 'mago'],
  geas: ['bardo', 'clerigo', 'druida', 'mago', 'paladin'],
  golpe_flamigero: ['paladin'],
  inmovilizar_monstruo: ['bardo', 'brujo', 'hechicero', 'mago'],
  mano_arcana: ['mago'],
  muro_de_fuerza: ['mago'],
  muro_de_piedra: ['druida', 'hechicero', 'mago'],
  nube_aniquiladora: ['mago'],
  pasamuros: ['mago'],
  paso_arboreo: ['druida', 'explorador'],
  plaga_de_insectos: ['clerigo', 'druida', 'hechicero'],
  reencarnar: ['druida'],
  restablecimiento_mayor: ['bardo', 'clerigo', 'druida'],
  telequinesis: ['hechicero', 'mago'],

  // Nivel 6
  aliado_planar: ['clerigo'],
  baile_irresistible: ['bardo', 'mago'],
  barrera_de_cuchillas: ['clerigo'],
  circulo_de_muerte: ['brujo', 'hechicero', 'mago'],
  conjurar_feerico: ['druida', 'brujo'],
  contingencia: ['mago'],
  crear_muerto_viviente: ['clerigo', 'brujo', 'mago'],
  curar_conjuro: ['clerigo', 'druida'],
  danar: ['clerigo'],
  de_la_carne_a_la_piedra: ['brujo', 'mago'],
  desintegrar: ['hechicero', 'mago'],
  encontrar_el_camino: ['bardo', 'clerigo', 'druida'],
  esfera_congelante: ['mago'],
  festin_de_heroes: ['clerigo', 'druida'],
  globo_de_invulnerabilidad: ['hechicero', 'mago'],
  guardas_y_guardias: ['bardo', 'mago'],
  ilusion_programada: ['bardo', 'mago'],
  invocacion_instantanea: ['mago'],
  mal_de_ojo: ['bardo', 'brujo', 'mago'],
  mover_la_tierra: ['druida', 'hechicero', 'mago'],
  muro_de_espinas: ['druida'],
  muro_de_hielo: ['mago'],
  palabra_de_regreso: ['clerigo'],
  prohibicion: ['clerigo'],
  rayo_solar: ['druida', 'hechicero', 'mago'],
  relampago_en_cadena: ['hechicero', 'mago'],
  sugestion_en_masa: ['bardo', 'brujo', 'hechicero', 'mago'],
  urna_magica: ['mago'],
  viajar_con_el_viento: ['druida'],
  viajar_mediante_plantas: ['druida'],
  vision_veraz: ['bardo', 'clerigo', 'brujo', 'hechicero', 'mago'],

  // Nivel 7
  bola_de_fuego_de_explosion_retardada: ['hechicero', 'mago'],
  conjurar_celestial: ['clerigo'],
  dedo_de_la_muerte: ['brujo', 'hechicero', 'mago'],
  desplazamiento_entre_planos: ['clerigo', 'druida', 'hechicero', 'brujo', 'mago'],
  espada_arcana: ['bardo', 'mago'],
  espejismo_arcano: ['bardo', 'druida', 'mago'],
  excursion_eterea: ['bardo', 'clerigo', 'brujo', 'mago'],
  invertir_la_gravedad: ['druida', 'hechicero', 'mago'],
  jaula_de_fuerza: ['bardo', 'brujo', 'mago'],
  mansion_magnifica: ['bardo', 'mago'],
  palabra_divina: ['clerigo'],
  proyectar_imagen: ['bardo', 'mago'],
  recluir: ['mago'],
  regenerar: ['bardo', 'clerigo', 'druida'],
  resurreccion: ['bardo', 'clerigo'],
  rociada_prismatica: ['hechicero', 'mago'],
  simbolo: ['bardo', 'clerigo', 'mago'],
  simulacro: ['mago'],
  teletransporte: ['bardo', 'hechicero', 'mago'],
  tormenta_de_fuego: ['clerigo', 'druida', 'hechicero'],

  // Nivel 8
  antipatia_simpatia: ['druida', 'mago'],
  aspectos_animales: ['druida'],
  aura_sagrada: ['clerigo'],
  campo_antimagia: ['clerigo', 'mago'],
  clon: ['mago'],
  controlar_el_clima: ['clerigo', 'druida', 'mago'],
  dominar_monstruo: ['bardo', 'brujo', 'hechicero', 'mago'],
  explosion_solar: ['druida', 'hechicero', 'mago'],
  laberinto: ['mago'],
  labia: ['bardo', 'mago'],
  mente_en_blanco: ['bardo', 'mago'],
  nube_incendiaria: ['hechicero', 'mago'],
  palabra_de_poder_aturdir: ['bardo', 'brujo', 'hechicero', 'mago'],
  romper_la_mente: ['bardo', 'brujo', 'hechicero', 'mago'],
  semiplano: ['brujo', 'mago'],
  terremoto: ['clerigo', 'druida', 'hechicero'],

  // Nivel 9
  cambiar_de_forma: ['druida'],
  cautiverio: ['brujo', 'mago'],
  curar_en_masa: ['clerigo'],
  deseo: ['hechicero', 'mago'],
  muro_prismatico: ['mago'],
  palabra_de_poder_matar: ['bardo', 'brujo', 'hechicero', 'mago'],
  parar_el_tiempo: ['hechicero', 'mago'],
  polimorfar_verdadero: ['bardo', 'brujo', 'mago'],
  portal: ['clerigo', 'hechicero', 'mago'],
  presagio: ['druida'],
  proyeccion_astral: ['clerigo', 'brujo', 'mago'],
  resurreccion_verdadera: ['clerigo', 'druida'],
  terror_abyecto: ['mago'],
  tormenta_de_la_venganza: ['druida'],
  tormenta_de_meteoritos: ['hechicero', 'mago'],
};

/** Get class list for a spell by its ID */
export function getSpellClasses(spellId: string): CasterClassId[] {
  return SPELL_CLASS_MAP[spellId] || [];
}
